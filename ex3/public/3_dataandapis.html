<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node express</title>
</head>
<body>
    <script>
        if('geolocation' in navigator){
            console.log('Gelocation is available');
            navigator.geolocation.getCurrentPosition( async position =>{
                console.log(position.coords);

                const lat = position.coords.latitude;
                const lon = position.coords.longitude;

                document.getElementById('lat').textContent = lat;
                document.getElementById('lon').textContent = lon;

                const datos = {lat,lon}
                const options = {
                    method: 'POST',
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify(datos)
                }

                const response = await fetch('/api', options)
                const datajason  = await response.json();
                console.log(datajason);

            } );
        }else{
            console.log('Gelocation is NOT available');
        }
    </script>
    <header>

    </header>

    <main>
        <div>
            <p>Here I am</p>
             
        </div>

        <div>
            <p>
                latitude: <span id="lat"></span> <br>
                longitude: <span id="lon"></span>
            </p>
        </div>
    </main>
    
</body>
</html>